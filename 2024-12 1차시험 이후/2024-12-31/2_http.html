<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  HTTP
  Hyher Text Transfer Protocol
   - 통신규약
   - 명확, 단순
   - 클라이언트와 서버간의 통신을 위한 구조

  HTTP Request Message
   - start line, header, body
   입력하는 내용
  1. start line : HTTP Method(GET,POST,DELETE,PUT),
                  요청 대상(url),
                  http version(1.1)
  URI(Uniform Resource Identifier) : 
    URN + URL
    자원에 위치, 고유식별자로써 URL을 포함하고있는 개념
    언제나 붙어있음.(인터넷에서 요구되는 기본조건)

  www.naver.com      <- url
  www.naver.com/news <- url
  url                uri
  www.naver.com/news/13(식별자)

  식별자가 붙어있느냐ㅑㅑ 아니냐에 따라 uri냐 url이냐를 구분
  위치만 나타내면 URL, 주소에 식별자가 있으면 uri(url을 포함한)

  URN(Uniform Resource Name) : 위치 상관없이 식별 가능한 고유한 이름의 역할
    (URL이 위치를 기준으로 접근, key값을 기준으로 접근)
    URL의 한계를 극복하기위해 등작하였지만
    URL의 대중화를 끝내기에는 아직 시기상종
    URL의 한계 : 경로 변경, 파일이동시 대처 불가
    
  URL(Uniform Resource Locator) : 리소스의 정확한 위치 정보
        URL을 통해 리소스로 정확하게 접근할 수 있음
        (파일이나 웹상에 있는 정보)
        ex) www.naver.com
      URL 구조 :
      스키마//호스트(도메인):포트번호/경로?쿼리스트링
      https://www.naver.com:443/index?id=1&page=4
      스키마 : 통신방식 결정
        http, https, ftp, sftp, file, RTSP 
      도메인 : IP를 사람이 기억하기 편한 단어로 도메인화
      포트 : 각 프로토콜의 데이터가 통하는 논리적 통로
      경로 : 웹서버의 루트 디렉토리부터의 위치
      쿼리 스트링 : 리소스의 형식범위를 좁히기 위한 질의(k=v)

  HTTP Response Messge
    body : 전송할 데이터
  OSI 7 Layer
   - 시스템들으리 상호 연결에 있어서 문제가 없도록 표준을 정한 개념
   - 개방형 시스템 상호연결모델의 표준
   - 실제 인터넷에서 사용되는 TCP/IP는 OSI 표준 참조모델을 기반으로
     상업적이고 실무적으로 이용될 수 있도록 단순화

  1. 물리계층
      - 일반적인 서버 장비 계층. 데이터를 전송하기 위한 목적
        (케이블, 허브)
      - 전기적이나 기계적인 특성을 이용하여 데이터를 전송
  2. 데이터링크 계층
      - 연결을 통하여(물리적) 인접한 장치간 정보 전송을 담당
        point-to-point 전송방식 사용(단위:frame)
      - 브리지, 스위치
  3. 네트워크 계층
      - 중계(어떻게 중계할것인가), 라우팅(목적지까지 어떻게 데이터를 보낼까)
      - 컴퓨터에게 데이터를 전송할때 주소를 가지고있어서 통신이 가능
      IP -> 네트워크 계층의 헤더 / 단위는 패킷
      - 라우터 , L3스위치
  4. 전송계층
      - 종단(장비) 간 신뢰성 있고 정확한 데이터 전송 담당
      - 송수신자간 신뢰성 있고 효율적인 데이터 전송을 위해
        오류검출, 복구, 흐름제어, 중복검사들을 수행
      - Port -> 데이터 전송을 위해 port 번호를 사용
        (TCP/UDP)
      - segment라는 단위를 사용(데이터 전송시)
      
  5. 세션계층 - 통신 장치간 상호 작용과 동기화 제공
  6. 표현계층
    - 데이터를 어떤식으로 표현할지 정하는 계층
    6-1 송신자에서 온 데이터를 해석하기 위한 데이터 부호화
    6-2 수진자에서 데이터를 압출을 풀 수 있는 방식으로 제공
    6-3 데이터 암/복호화
  7. 응용계층
    - 일반 사용자와 가장 밀접한 계층(인터페이스)
    - 응용 프로세스간의 정보 교환을 담당
      (메일, 인터넷, 동영상 플레이어)

  HTTP Method
  - GET, POST ,PUT, DELETE, CONNECT, OPTIONS, TRACE, PATCH
  GET 목적 , 특징
   - 조회 목적
   - 보안성 낮음, 길이제한(255), 데이터를 URL에 노출
  POST 목적, 특징
   - HTTP 패킷 body사용(요청시 body에 실어보냄)
   - 대용량 데이터 전송 가능. 대신느림(GET대비)
  put : 리소스 전체를 대체할때 사용하는 메서드(전송방식)
   - 리소스가 없으면(받아온게 없으면) 새로생성. 있으면 기존것 대체
  delete : 특정 리소스 삭제
   - 요청된 리소스 제거시 사용
  
  HTTP Status Cod(중요)
   - 웹서버가 클라이언트의 요청 처리 결과를 알려주는 3자리 숫자코드
   - 문제 진단 및 해결을 위해서도 중요
  
  5대 상태 코드 분류
  1xx : 정보응답
   - 100 : 계속 / 클라이언트가 요청해더에 100-continue 라고 보내면
           서버는 처리 가능 시 응답하는 형태(거의 보기 힘듬)
   - 101(swtichin protocol) : 프로토콜 업그레이드(안씀)
   - 102(processing) : 처리중
   - 103~199 : 할당되지 않음
  2xx : 성공응답
   - 200(OK) : 요청 성공적으로 처리
   - 201(Created) : 생성됨 -> 요청처리로 인하여 새로운 리소스 생성
   - 202(Accepted) : 허용됨 -> 요청은 접수하였지만 처리는 미완
   (규모가 큰 사이트에서 볼 수 있음)
   - 203(non-Authoritative Information) -> 신뢰 할 수 없는 정보
   - 204(no content) -> 처리는 성공 but 응답할 내용이 없음
   - 205(Reset content) -> 처리는 성공 but 브라우저 새로고침
      -> 모든 입력항목을 리셋하고 재입력할 수 있는 상태로 변경
   - 206(Partial Content) -> 컨텐츠 일부 내용만을 전송
   - 207(Multi-status) -> 결과는 성공이지만 각각처리 결과가 성공인지는 모름
      (처리 결과가 여러개)
  3xx : 리다이렉션 : 클라이언트는 요청을 마치려면 추가 동작을 진행해야함
    301,303,307
    - 301 : Moved Permanently : 지정한 리소스가 새로운 URI로 이동했다라는 의미
    - 303 : See Other : 다른위치로 요청할것
    - 307 : 임시 리다이렉션 요청이 필요
  4xx : 클라이언트 오류(451번까지 있음)
        (클라이언트 요청에 오류가 있음) 
    - 400, 401, 403, 404 / 402가 있긴하지만 사용x (결제요청)
    - 400(Bad request / 잘못된 요청)
    - 401(Unauthorized / 지정한 리소스에 대한 액세스 권한이 없음)
    - 403(Forbidden / 액세스 금지)
      401 인증처리 이외의 사유로 리소스에 대한 엑세스 금지
      사용자에게는 흔히 404를 보여주는것이 나음
    - 404(Not Found / 지정한 리소스를 찾을 수 없음)
    - 405(Method Not Allowed / 허용되지 않은 메서드)
    - 408(Request Timeout / 요청을 기다리다 서버에서 타임아웃함)
    - 409(Conflict / 서버가 요청 수행 중 충돌 발생)
        (데이터를 수정할 때 주로 발생할 수 있음)
    - 413(Request Entity Too Large / 요청메시지가 너무 길음)
    - 414(Request-URI Too Large)
    - 415(Unsupported Media Type / 클라이언트가 지정한 미디어 타입을 서버가 지원하지 않음)
    - 429(Too Many Requests / 너무 많은 요청)
    - 444(Connection Colosed Without Response /응답없이 연결닫기)
    (악의적인 요청에 대해 주로 사용되는 상태코드)
    - 451(법적 사유로 불가 / 법적으로 문제가 있는 리소스 요청)
      정부기관 검열(중국, 북한)
  5xx : 서버 오류(클라이언트 문제 X, 서버가 처리에 실패함)
    - 500 : 서버 에러 발생
    - 501 : 요청한 URI 에 대해 서버가 구현하고있지않음(메서드)
    - 502(Bad Gateway) : 서버가 잘못된 응답을 받아옴
    - 503(Service Unavailable) : 서비스 제공불가
      해당 서비스 점검시 발생
    - 504(Gateway Timeout) : 게이트웨이 시간 초과
    - 507(Insufficient Storage) : 저장공간 부족

  HTTPS(Secure) : 암호화된 데이터 전송
   - SSL/TLS 프로토콜 사용
   - 공개키/개인키 암호화 방식
   - 데이터 안전하게 보호
   - HTTP와 비교하면 성능은 르미
     대신 보안이 HTTP에 대비 우수, 검색순위에서 유리함
   - 로그인페이지, 결제 시스템에서는 거의 필수
   - 개인정보를 다룬다면 무조건써야함
  
  쿠키&세션
   - 결론 : 둘이 비슷한개념 다만 어디에 저장되는지 차이
   - HTTP 프로토콜의 약점을 보완하기 위해 사용
   - 요청을 받아서 응답을 진행하면 그후 연결을 끊어버리는것이 HTTP의 특징(stateless)
   - Stateless = 로그인을 매 페이지 넘어갈때마다 해야함
   
  쿠키 : 사용자가 웹사이트를 방문했을때 그 사이트가 사용중인 서버에서
        사용자의 컴퓨터에 저장하는 작은 기록 정보 파일
        크기는 4kb로 제한
  세션 : 일정시간동안 같은 사용자로부터 들어오는 Req를 하나의 상태로 보고
        그상태를 유지시키는 기술(쿠키를 서비스 하는 서버에 저장)
        세션정보는 서버메모리나 DB에 저장
        
  사실 세션은 쿠키를 활용하기 때문
   

  쿠키와 세션의 차이점
  1. 저장되는 위치
   - 쿠키는 사용자 자원, 세션은 서버 자원 사용
   - 세션은 보안측면에서 우수
   - 쿠키는 사용자 장치에 저장되기때문에 변질, 스니핑의 우려가 있음
   - 둘다 만료기간은 있음
   - 속도측면은 쿠키가 세션대비 우수

  쿠키는 경량 데이터 위주의 보관
  민감정보는 세션에서 저장하여 관리
  특히나 보안 취약점을 노출해서는 안되는 부분
   -> CSRF 토큰, 세션은 타임아웃을 기본적으로 1시간

  
  헤더 : http 요청/응답에 포함되는 추가정보
   - key:value형식으로 구성
   - 클라이언트와 서버간 메타데이터 전달이 주 목적
  
  헤더 분류
  1. 일반 헤더
    - 요청과 응답에 모두 사용되는 헤더
      (date, connection)
  2. 요청 헤더
    - 클라이언트가 서버에 보냄
      host : 요청하는 서버
      user-Agent : 클라이언트 소프트웨어 정보
      Accept : 수신 가능한 컨텐츠 타입
  3. 응답 헤더
    - 서버가 클라이언트에 보냄
      Server : 서버 프트웨어 정보
      Content-type : 응답 데이터 타입
      content-length : 응답 본문 크기
  4. 엔티티 헤더
    - 메시지 본문에 대한 정보
      Content-Encoding : 데이터 압축방식
      Last-modified : 최종 수정시간

  헤더 사용 전략
    1. 보안
      - JWT 토큰 설정
      - CORS 헤더 설정
      - 보안정책 헤더 활용
    2. 성능 최적화
     - 캐시 제어
     - 압축 설정
     - 조건부 요청
    3. 데이터 포맷
     - 언어 선택 및 데이터 포멧 협상

  API 엔드포인트 개념
  통신 환경 구축 (Express)
  RESTful API 디자인(구축)
  웹소켓 통신
  인증 / 인가 메커니즘
  성능 최적화 전략


</body>
</html>